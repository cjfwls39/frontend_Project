<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>가계부</title>
    <link rel="stylesheet" href="css/GlobalStyle.css" />
    <link rel="stylesheet" href="css/household.css" />
    <script src="js/authSession.js" defer></script>
    <script src="js/storageUtil.js" defer></script>
    <script src="js/accountStorage.js" defer></script>
    <script src="js/transactionStorage.js" defer></script>
    <script src="js/household.js" defer></script>
  </head>
  <body>
    <main class="household-container">
      <header class="household-header">
        <nav class="menu">
          <ul>
            <li><a href="index.html">메인</a></li>
            <li><a href="calender.html">캘린더</a></li>
            <li><a href="household.html">가계부</a></li>
            <li><a href="accounts.html">계좌</a></li>
          </ul>
        </nav>
        <div class="header-actions">
          <div class="header-title">가계부 대시보드</div>
          <p class="header-user">사용자: <strong id="currentUserLabel">demo</strong></p>
          <button type="button" id="logoutBtn" class="logout-btn" hidden>로그아웃</button>
        </div>
      </header>

      <aside class="household-left">
        <section class="summary-card">
          <div class="summary-head">
            <button type="button" class="month-btn" id="prevMonthBtn" aria-label="이전 달">
              &#8249;
            </button>
            <h2 id="monthLabel">2026년 2월</h2>
            <button type="button" class="month-btn" id="nextMonthBtn" aria-label="다음 달">
              &#8250;
            </button>
          </div>
          <p class="summary-label">이번 달 지출</p>
          <p class="summary-value expense" id="expenseTotalLabel">0원</p>
          <p class="summary-label">이번 달 수입</p>
          <p class="summary-value income" id="incomeTotalLabel">0원</p>
          <p id="monthDeltaLabel" class="delta-text">지난달과 비교 중</p>
        </section>

        <section class="entry-card">
          <h3>거래 추가</h3>
          <form id="txForm" class="tx-form">
            <label class="tx-field">
              <span>날짜</span>
              <input id="txDateInput" name="date" type="date" required />
            </label>
            <label class="tx-field">
              <span>유형</span>
              <select id="txTypeInput" name="type" required>
                <option value="expense">지출</option>
                <option value="income">수입</option>
              </select>
            </label>
            <label class="tx-field">
              <span>카테고리</span>
              <select id="txCategoryInput" name="category" required></select>
            </label>
            <label class="tx-field">
              <span>금액</span>
              <input id="txAmountInput" name="amount" type="number" min="1" step="1" placeholder="0" required />
            </label>
            <button class="tx-submit-btn" type="submit">저장</button>
          </form>
          <p id="txFormMessage" class="tx-form-message" aria-live="polite"></p>
        </section>

        <section class="insight-card">
          <h3>소비 인사이트</h3>
          <p id="topCategoryLabel">가장 많이 쓴 카테고리를 분석 중입니다.</p>
        </section>

        <section class="transfer-card">
          <h3>계좌 이동 연동</h3>
          <p id="transferSummaryLabel" class="transfer-summary">이번 달 계좌 이동 내역을 불러오는 중입니다.</p>
          <ul id="transferRecentList" class="transfer-recent-list"></ul>
        </section>

        <section class="legend-card">
          <h3>표시 기준</h3>
          <div class="legend-row"><span class="dot income"></span> 수입</div>
          <div class="legend-row"><span class="dot expense"></span> 지출</div>
          <div class="legend-row"><span class="dot net"></span> 순이동(수입-지출)</div>
        </section>
      </aside>

      <section class="household-right">
        <div class="calendar-header-row">
          <h2 id="calendarTitle">2026년 2월 지출/수입/순이동 캘린더</h2>
        </div>
        <div class="week-header">
          <span>일</span>
          <span>월</span>
          <span>화</span>
          <span>수</span>
          <span>목</span>
          <span>금</span>
          <span>토</span>
        </div>
        <div id="calendarDays" class="calendar-days"></div>
      </section>
    </main>

    <div id="dayPopupBackdrop" class="day-popup-backdrop" aria-hidden="true"></div>
    <aside id="dayPopup" class="day-popup" aria-hidden="true" aria-label="당일 거래 목록">
      <header class="day-popup-header">
        <div>
          <p class="day-popup-caption">선택한 날짜 거래</p>
          <h3 id="dayPopupTitle">날짜를 선택하세요</h3>
        </div>
        <button type="button" id="closeDayPopupBtn" class="close-popup-btn" aria-label="팝업 닫기">
          닫기
        </button>
      </header>
      <div class="day-popup-summary">
        <p id="dayPopupIncome">수입 0원</p>
        <p id="dayPopupExpense">지출 0원</p>
      </div>
      <ul id="dayTransactionList" class="day-transaction-list"></ul>
    </aside>
  </body>
</html>
